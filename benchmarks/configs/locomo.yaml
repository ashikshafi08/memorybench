name: locomo
displayName: "LoCoMo"
description: "Long-form Conversation Memory benchmark"
version: "1.0"
source: "https://github.com/snap-research/locomo"
paper: "https://arxiv.org/abs/2402.17753"
tags:
  - conversation
  - memory
  - multi-category

data:
  type: local
  path: "./benchmarks/LoCoMo/locomo10.json"
  format: json

schema:
  itemId: "sample_id"

  questions:
    field: "qa"
    questionField: "question"
    answerField: "answer"
    evidenceField: "evidence"
    categoryField: "category"

  context:
    field: "conversation"
    type: object
    sessionPattern: "session_*"
    datePattern: "session_*_date_time"
    itemSchema:
      speaker: "$.speaker"
      text: "$.text"
      dialogId: "$.dia_id"

  metadata:
    speakerA: "conversation.speaker_a"
    speakerB: "conversation.speaker_b"

categories:
  "1": "Multi-hop"
  "2": "Temporal Reasoning"
  "3": "Open-domain"
  "4": "Single-hop"
  "5": "Adversarial"

ingestion:
  mode: session-based
  batchSize: 1
  delayBetweenBatches: 5000
  preprocessing:
    formatTemplate: |
      ${sessionDate}
      ${session.map(turn => `${turn.speaker}: ${turn.text}`).join('\n')}

search:
  defaultLimit: 10
  defaultThreshold: 0.3
  includeChunks: true

evaluation:
  method: custom
  customEvaluator: locomo-qa

  answeringModel:
    model: "openrouter/openai/gpt-5-nano"
    temperature: 0

  answerPrompt:
    default: |
      ${retrievedContext}

      Based on the above context, write an answer in the form of a short phrase for the following question. Answer with exact words from the context whenever possible.

      Question: ${question} Short answer:
    byQuestionType:
      "5": |
        ${retrievedContext}

        Based on the above context, answer the following question.

        Question: ${question} Short answer:
    userOverride: true

metrics:
  - accuracy
  - accuracy_by_category
  - f1
  - bleu_1
  - recall_at_5

runtime:
  checkpointing: true
  checkpointGranularity: item
  resumable: true

